<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Address Parsing in <code>R</code> • postmastr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Address Parsing in &lt;code&gt;R&lt;/code&gt;">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">postmastr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/postmastr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/slu-openGIS/postmastr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Address Parsing in <code>R</code>
</h1>
                        <h4 class="author">Christopher Prener, Ph.D.</h4>
            
            <h4 class="date">2019-02-09</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/slu-openGIS/postmastr/blob/master/vignettes/postmastr.Rmd"><code>vignettes/postmastr.Rmd</code></a></small>
      <div class="hidden name"><code>postmastr.Rmd</code></div>

    </div>

    
    
<p><code>postmastr</code> is designed to be an <em>opinionated</em> toolkit for parsing street addresses using <code>R</code>. It was originally created to standardize addresses prior to geocoding the, in an effor to increase the geocoder’s ability to correctly match a given address with the appropriate coordinates.</p>
<div id="motivation" class="section level2">
<h2 class="hasAnchor">
<a href="#motivation" class="anchor"></a>Motivation</h2>
<p>Street addresses can be notoriously difficult to work with. In the United States, the U.S. Postal Service has <a href="https://pe.usps.com/text/pub28/welcome.htm">standards for their composition</a>. There is so much variety, however, that anticipating all of the possible permutations of addresses is a significant task. When the inaccuracy of human data entry is added, the challenge of parsing addresses becomes monumental. The goal of <code>postmastr</code> is to provide a uniform workflow for parsing street address data that allows for sufficient flexibility.</p>
<p>This flexibility is provided in two ways. First, we utilize “dictionaries” for a number of the key functions that allow users to provide vectors of data to base parsing on. This enables <code>postmastr</code> to parse potential misspellings and colloquial terms that are hard (or impossible) to predict. Second, not all aspects of the workflow are mandatory - if street address data do not contain postal codes, states, or cities, for example, those functions can be skipped.</p>
</div>
<div id="a-grammar-of-street-addresses" class="section level2">
<h2 class="hasAnchor">
<a href="#a-grammar-of-street-addresses" class="anchor"></a>A Grammar of Street Addresses</h2>
</div>
<div id="creating-dictionaries" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-dictionaries" class="anchor"></a>Creating Dictionaries</h2>
<div id="state-dictionaries" class="section level3">
<h3 class="hasAnchor">
<a href="#state-dictionaries" class="anchor"></a>State Dictionaries</h3>
<p><code>postmastr</code> comes with a built-in dictionary of states and their abbreviations that can be expanded and filterd using <code>pm_dictionary()</code> and <code>pm_append()</code>. On its own, <code>pm_dictionary()</code> will return that built-in dictionary:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">pm_dictionary</span>(<span class="dt">locale =</span> <span class="st">"us"</span>, <span class="dt">type =</span> <span class="st">"state"</span>)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="co"># A tibble: 124 x 2</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3">   state.output state.input                                     </a>
<a class="sourceLine" id="cb1-4" data-line-number="4">   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">        </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">                                           </span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="st"> </span><span class="dv">1</span> AA           Armed Forces Americas                           </a>
<a class="sourceLine" id="cb1-6" data-line-number="6"> <span class="dv">2</span> AA           AA                                              </a>
<a class="sourceLine" id="cb1-7" data-line-number="7"> <span class="dv">3</span> AE           Armed Forces Europe, the Middle East, and Canada</a>
<a class="sourceLine" id="cb1-8" data-line-number="8"> <span class="dv">4</span> AE           AE                                              </a>
<a class="sourceLine" id="cb1-9" data-line-number="9"> <span class="dv">5</span> AK           AK                                              </a>
<a class="sourceLine" id="cb1-10" data-line-number="10"> <span class="dv">6</span> AK           Alaska                                          </a>
<a class="sourceLine" id="cb1-11" data-line-number="11"> <span class="dv">7</span> AL           AL                                              </a>
<a class="sourceLine" id="cb1-12" data-line-number="12"> <span class="dv">8</span> AL           Alabama                                         </a>
<a class="sourceLine" id="cb1-13" data-line-number="13"> <span class="dv">9</span> AP           Armed Forces Pacific                            </a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="dv">10</span> AP           AP                                              </a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="co"># … with 114 more rows</span></a></code></pre></div>
<p>If only a subset of states are included in your data, you can improve <code>postmastr</code>’s performance by limiting your state dictionary’s contents. The <code>filter</code> argument can accept scalar or vector inputs of two-letter state abbreviations. For instance, we could construction a state dictionary that contains only the states along the Gulf of Mexico:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">pm_dictionary</span>(<span class="dt">locale =</span> <span class="st">"us"</span>, <span class="dt">type =</span> <span class="st">"state"</span>, <span class="dt">filter =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"AL"</span>, <span class="st">"FL"</span>, <span class="st">"LA"</span>, <span class="st">"MS"</span>, <span class="st">"TX"</span>))</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="co"># A tibble: 10 x 2</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">   state.output state.input</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">        </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">      </span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="st"> </span><span class="dv">1</span> AL           AL         </a>
<a class="sourceLine" id="cb2-6" data-line-number="6"> <span class="dv">2</span> AL           Alabama    </a>
<a class="sourceLine" id="cb2-7" data-line-number="7"> <span class="dv">3</span> FL           FL         </a>
<a class="sourceLine" id="cb2-8" data-line-number="8"> <span class="dv">4</span> FL           Florida    </a>
<a class="sourceLine" id="cb2-9" data-line-number="9"> <span class="dv">5</span> LA           LA         </a>
<a class="sourceLine" id="cb2-10" data-line-number="10"> <span class="dv">6</span> LA           Louisiana  </a>
<a class="sourceLine" id="cb2-11" data-line-number="11"> <span class="dv">7</span> MS           MS         </a>
<a class="sourceLine" id="cb2-12" data-line-number="12"> <span class="dv">8</span> MS           Mississippi</a>
<a class="sourceLine" id="cb2-13" data-line-number="13"> <span class="dv">9</span> TX           TX         </a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="dv">10</span> TX           Texas   </a></code></pre></div>
<p>The state dictionary can also be expanded. For instance, there are several common abbreviations for Mississippi - “Miss” and “MISS”. We can create an appendix with <code>pm_append()</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>miss &lt;-<span class="st"> </span><span class="kw">pm_append</span>(<span class="dt">locale =</span> <span class="st">"us"</span>, <span class="dt">type =</span> <span class="st">"state"</span>, <span class="dt">input =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Miss"</span>, <span class="st">"MISS"</span>), <span class="dt">output =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"MS"</span>, <span class="st">"MS"</span>))</a></code></pre></div>
<p>Once this has been created, we can combine it with the default state dictionary to create our custom dictionary output:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">pm_dictionary</span>(<span class="dt">locale =</span> <span class="st">"us"</span>, <span class="dt">type =</span> <span class="st">"state"</span>, <span class="dt">append =</span> miss, <span class="dt">filter =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"AL"</span>, <span class="st">"FL"</span>, <span class="st">"LA"</span>, <span class="st">"MS"</span>, <span class="st">"TX"</span>))</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co"># A tibble: 12 x 2</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3">   state.output state.input</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">        </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">      </span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="st"> </span><span class="dv">1</span> AL           AL         </a>
<a class="sourceLine" id="cb4-6" data-line-number="6"> <span class="dv">2</span> AL           Alabama    </a>
<a class="sourceLine" id="cb4-7" data-line-number="7"> <span class="dv">3</span> FL           FL         </a>
<a class="sourceLine" id="cb4-8" data-line-number="8"> <span class="dv">4</span> FL           Florida    </a>
<a class="sourceLine" id="cb4-9" data-line-number="9"> <span class="dv">5</span> LA           LA         </a>
<a class="sourceLine" id="cb4-10" data-line-number="10"> <span class="dv">6</span> LA           Louisiana  </a>
<a class="sourceLine" id="cb4-11" data-line-number="11"> <span class="dv">7</span> MS           MS         </a>
<a class="sourceLine" id="cb4-12" data-line-number="12"> <span class="dv">8</span> MS           Mississippi</a>
<a class="sourceLine" id="cb4-13" data-line-number="13"> <span class="dv">9</span> MS           Miss       </a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="dv">10</span> MS           MISS       </a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="dv">11</span> TX           TX         </a>
<a class="sourceLine" id="cb4-16" data-line-number="16"><span class="dv">12</span> TX           Texas </a></code></pre></div>
<p>All of the different inputs for Mississippi will now return the same <code>MS</code> output.</p>
</div>
</div>
<div id="the-postmastr-workflow" class="section level2">
<h2 class="hasAnchor">
<a href="#the-postmastr-workflow" class="anchor"></a>The postmastr Workflow</h2>
<p>To illustrate the core components of the <code>postmastr</code> workflow, we’ll use some data on sushi resturants in the St. Louis, Missouri region. These are “long” data - some resturants appear multiple times. Here is a quick preview of the data:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>sushi1</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co"># A tibble: 30 x 3</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3">   name                            address                                           visit   </a>
<a class="sourceLine" id="cb5-4" data-line-number="4">   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">                           </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">                                             </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">   </span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="st"> </span><span class="dv">1</span> BaiKu Sushi Lounge              <span class="dv">3407</span> Olive St, St. Louis, Missouri <span class="dv">63103</span>          <span class="dv">3</span><span class="op">/</span><span class="dv">20</span><span class="op">/</span><span class="dv">18</span> </a>
<a class="sourceLine" id="cb5-6" data-line-number="6"> <span class="dv">2</span> Blue Ocean Restaurant           <span class="dv">6335</span> Delmar Blvd, St. Louis, MO <span class="dv">63112</span>             <span class="dv">10</span><span class="op">/</span><span class="dv">26</span><span class="op">/</span><span class="dv">18</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"> <span class="dv">3</span> Cafe Mochi                      <span class="dv">3221</span> S Grand Boulevard, St. Louis, MO <span class="dv">63118</span>       <span class="dv">10</span><span class="op">/</span><span class="dv">10</span><span class="op">/</span><span class="dv">18</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"> <span class="dv">4</span> Drunken Fish <span class="op">-</span><span class="st"> </span>Ballpark Village <span class="dv">601</span> Clark Ave <span class="co">#104, St. Louis, MO 63102-1719      4/28/18 </span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"> <span class="dv">5</span> Drunken Fish <span class="op">-</span><span class="st"> </span>Ballpark Village <span class="dv">601</span> Clark Ave Suite <span class="dv">104</span>, St. Louis, MO <span class="dv">63102-1719</span> <span class="dv">5</span><span class="op">/</span><span class="dv">10</span><span class="op">/</span><span class="dv">18</span> </a>
<a class="sourceLine" id="cb5-10" data-line-number="10"> <span class="dv">6</span> Drunken Fish <span class="op">-</span><span class="st"> </span>Ballpark Village <span class="dv">601</span> Clark Ave Suite <span class="dv">104</span>, St. Louis, MO <span class="dv">63102-1719</span> <span class="dv">8</span><span class="op">/</span><span class="dv">7</span><span class="op">/</span><span class="dv">18</span>  </a>
<a class="sourceLine" id="cb5-11" data-line-number="11"> <span class="dv">7</span> Drunken Fish <span class="op">-</span><span class="st"> </span>Central West End <span class="dv">1</span> Maryland Plaza, St. Louis, MO <span class="dv">63108</span>             <span class="dv">12</span><span class="op">/</span><span class="dv">2</span><span class="op">/</span><span class="dv">18</span> </a>
<a class="sourceLine" id="cb5-12" data-line-number="12"> <span class="dv">8</span> I Love Mr Sushi                 <span class="dv">9443</span> Olive Blvd, St. Louis, Missouri <span class="dv">63132</span>        <span class="dv">1</span><span class="op">/</span><span class="dv">1</span><span class="op">/</span><span class="dv">18</span>  </a>
<a class="sourceLine" id="cb5-13" data-line-number="13"> <span class="dv">9</span> Kampai Sushi Bar                <span class="dv">4949</span> W Pine Blvd, St. Louis, MO <span class="dv">63108</span>             <span class="dv">2</span><span class="op">/</span><span class="dv">13</span><span class="op">/</span><span class="dv">18</span> </a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="dv">10</span> Midtown Sushi <span class="op">&amp;</span><span class="st"> </span>Ramen           <span class="dv">3674</span> Forest Park Ave, St. Louis, MO <span class="dv">63108</span>         <span class="dv">3</span><span class="op">/</span><span class="dv">4</span><span class="op">/</span><span class="dv">18</span>  </a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co"># … with 20 more rows</span></a></code></pre></div>
<p>Some problems should already be apparent. For instance, Cafe Mouchi uses the full word for “Boulevard” while the entry for Blue Ocean uses the proper abbreviation “Blvd”. For Drunken Fish, the suite number is listed both using the pound sign (“#”) as well as with the word “Suite”. Finally, some of the entries including for BaiKu and I Love Mr Sushi use the full name for “Missouri” while the rest use the proper two-letter abbreviation “MO”. Finally, the Drunk Fish - Ballpark Village uses the “zip+4” format as opposed to the remainder of the addresses visible, which contain only the five digit zip-code.</p>
<p>Some of the other entries have additional issues. For example, Sushi Koi has its address fully capitalized:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>sushi1<span class="op">$</span>address[[<span class="dv">22</span>]]</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">[<span class="dv">1</span>] <span class="st">"4 N EUCLID AVE, SAINT LOUIS, MO 63108"</span></a></code></pre></div>
<p>Similarly, Wasabi Sushi Bar has its address fully capitalized, but the prefix direction “SOUTH” appears as a word rather than the proper “S”:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>sushi1<span class="op">$</span>address[[<span class="dv">30</span>]]</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">[<span class="dv">1</span>] <span class="st">"16 SOUTH CENTRAL AVE, CLAYTON, MISSOURI 63105"</span></a></code></pre></div>
<p>This vignette will walk through the process of addressing these issues.</p>
<div id="prep" class="section level3">
<h3 class="hasAnchor">
<a href="#prep" class="anchor"></a>Prep</h3>
<p>There are two initial prepretory steps that <em>must</em> be taken with these data. First, we want to ensure that they have a unique identification number for each row (to preserve the original sort order; <code>pm.id</code>) as well as a unique identification number for each <em>unique</em> street address string (<code>pm.uid</code>). These can both be applied using <code>pm.identify()</code>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>sushi1 &lt;-<span class="st"> </span><span class="kw">pm_identify</span>(sushi1, <span class="dt">var =</span> <span class="st">"address"</span>)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span>sushi1</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co"># A tibble: 30 x 5</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4">   pm.id pm.uid name                            address                                           visit   </a>
<a class="sourceLine" id="cb8-5" data-line-number="5">   <span class="op">&lt;</span>int<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">                           </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">                                             </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">   </span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="st"> </span><span class="dv">1</span>     <span class="dv">1</span>      <span class="dv">1</span> BaiKu Sushi Lounge              <span class="dv">3407</span> Olive St, St. Louis, Missouri <span class="dv">63103</span>          <span class="dv">3</span><span class="op">/</span><span class="dv">20</span><span class="op">/</span><span class="dv">18</span> </a>
<a class="sourceLine" id="cb8-7" data-line-number="7"> <span class="dv">2</span>     <span class="dv">2</span>      <span class="dv">2</span> Blue Ocean Restaurant           <span class="dv">6335</span> Delmar Blvd, St. Louis, MO <span class="dv">63112</span>             <span class="dv">10</span><span class="op">/</span><span class="dv">26</span><span class="op">/</span><span class="dv">18</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"> <span class="dv">3</span>     <span class="dv">3</span>      <span class="dv">3</span> Cafe Mochi                      <span class="dv">3221</span> S Grand Boulevard, St. Louis, MO <span class="dv">63118</span>       <span class="dv">10</span><span class="op">/</span><span class="dv">10</span><span class="op">/</span><span class="dv">18</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"> <span class="dv">4</span>     <span class="dv">4</span>      <span class="dv">4</span> Drunken Fish <span class="op">-</span><span class="st"> </span>Ballpark Village <span class="dv">601</span> Clark Ave <span class="co">#104, St. Louis, MO 63102-1719      4/28/18 </span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"> <span class="dv">5</span>     <span class="dv">5</span>      <span class="dv">5</span> Drunken Fish <span class="op">-</span><span class="st"> </span>Ballpark Village <span class="dv">601</span> Clark Ave Suite <span class="dv">104</span>, St. Louis, MO <span class="dv">63102-1719</span> <span class="dv">5</span><span class="op">/</span><span class="dv">10</span><span class="op">/</span><span class="dv">18</span> </a>
<a class="sourceLine" id="cb8-11" data-line-number="11"> <span class="dv">6</span>     <span class="dv">6</span>      <span class="dv">5</span> Drunken Fish <span class="op">-</span><span class="st"> </span>Ballpark Village <span class="dv">601</span> Clark Ave Suite <span class="dv">104</span>, St. Louis, MO <span class="dv">63102-1719</span> <span class="dv">8</span><span class="op">/</span><span class="dv">7</span><span class="op">/</span><span class="dv">18</span>  </a>
<a class="sourceLine" id="cb8-12" data-line-number="12"> <span class="dv">7</span>     <span class="dv">7</span>      <span class="dv">6</span> Drunken Fish <span class="op">-</span><span class="st"> </span>Central West End <span class="dv">1</span> Maryland Plaza, St. Louis, MO <span class="dv">63108</span>             <span class="dv">12</span><span class="op">/</span><span class="dv">2</span><span class="op">/</span><span class="dv">18</span> </a>
<a class="sourceLine" id="cb8-13" data-line-number="13"> <span class="dv">8</span>     <span class="dv">8</span>      <span class="dv">7</span> I Love Mr Sushi                 <span class="dv">9443</span> Olive Blvd, St. Louis, Missouri <span class="dv">63132</span>        <span class="dv">1</span><span class="op">/</span><span class="dv">1</span><span class="op">/</span><span class="dv">18</span>  </a>
<a class="sourceLine" id="cb8-14" data-line-number="14"> <span class="dv">9</span>     <span class="dv">9</span>      <span class="dv">8</span> Kampai Sushi Bar                <span class="dv">4949</span> W Pine Blvd, St. Louis, MO <span class="dv">63108</span>             <span class="dv">2</span><span class="op">/</span><span class="dv">13</span><span class="op">/</span><span class="dv">18</span> </a>
<a class="sourceLine" id="cb8-15" data-line-number="15"><span class="dv">10</span>    <span class="dv">10</span>      <span class="dv">9</span> Midtown Sushi <span class="op">&amp;</span><span class="st"> </span>Ramen           <span class="dv">3674</span> Forest Park Ave, St. Louis, MO <span class="dv">63108</span>         <span class="dv">3</span><span class="op">/</span><span class="dv">4</span><span class="op">/</span><span class="dv">18</span>  </a>
<a class="sourceLine" id="cb8-16" data-line-number="16"><span class="co"># … with 20 more rows</span></a></code></pre></div>
<p>Notice that the Drunken Fish has three different unique identifers applied for <code>pm.uid</code> - two for the Ballpark Village location based on how the suite number is indicated and one for the Central West End location. Since address data are often numerous, <code>postmastr</code> is designed to operate on unique street address strings rather than the full original data set to imrpove efficiency. We’ll create our minimal <code>postmastr</code> object using <code>pm.prep()</code>:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>sushi1_min &lt;-<span class="st"> </span><span class="kw">pm_prep</span>(sushi1, <span class="dt">var =</span> <span class="st">"address"</span>)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span>sushi1_min</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co"># A tibble: 24 x 2</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4">   pm.uid pm.address                                     </a>
<a class="sourceLine" id="cb9-5" data-line-number="5">    <span class="op">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">                                          </span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="st"> </span><span class="dv">1</span>      <span class="dv">1</span> <span class="dv">3407</span> Olive St St. Louis Missouri <span class="dv">63103</span>         </a>
<a class="sourceLine" id="cb9-7" data-line-number="7"> <span class="dv">2</span>      <span class="dv">2</span> <span class="dv">6335</span> Delmar Blvd St. Louis MO <span class="dv">63112</span>            </a>
<a class="sourceLine" id="cb9-8" data-line-number="8"> <span class="dv">3</span>      <span class="dv">3</span> <span class="dv">3221</span> S Grand Boulevard St. Louis MO <span class="dv">63118</span>      </a>
<a class="sourceLine" id="cb9-9" data-line-number="9"> <span class="dv">4</span>      <span class="dv">4</span> <span class="dv">601</span> Clark Ave <span class="co">#104 St. Louis MO 63102-1719     </span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10"> <span class="dv">5</span>      <span class="dv">5</span> <span class="dv">601</span> Clark Ave Suite <span class="dv">104</span> St. Louis MO <span class="dv">63102-1719</span></a>
<a class="sourceLine" id="cb9-11" data-line-number="11"> <span class="dv">6</span>      <span class="dv">6</span> <span class="dv">1</span> Maryland Plaza St. Louis MO <span class="dv">63108</span>            </a>
<a class="sourceLine" id="cb9-12" data-line-number="12"> <span class="dv">7</span>      <span class="dv">7</span> <span class="dv">9443</span> Olive Blvd St. Louis Missouri <span class="dv">63132</span>       </a>
<a class="sourceLine" id="cb9-13" data-line-number="13"> <span class="dv">8</span>      <span class="dv">8</span> <span class="dv">4949</span> W Pine Blvd St. Louis MO <span class="dv">63108</span>            </a>
<a class="sourceLine" id="cb9-14" data-line-number="14"> <span class="dv">9</span>      <span class="dv">9</span> <span class="dv">3674</span> Forest Park Ave St. Louis MO <span class="dv">63108</span>        </a>
<a class="sourceLine" id="cb9-15" data-line-number="15"><span class="dv">10</span>     <span class="dv">10</span> <span class="dv">1013</span> Washington Avenue St. Louis MO <span class="dv">63101</span>      </a>
<a class="sourceLine" id="cb9-16" data-line-number="16"><span class="co"># … with 14 more rows</span></a></code></pre></div>
<p>Notice that all extraneous information has been removed, and that there are now only 24 rows instead of the original 30.</p>
</div>
<div id="postal-codes" class="section level3">
<h3 class="hasAnchor">
<a href="#postal-codes" class="anchor"></a>Postal Codes</h3>
<p>All of the major grammatical elements of addresses have corresponding <code>has</code> and <code>parse</code> functions. The <code>has</code> functions return either a logical scalar if that grammatical element is found anywhere in the <code>postmastr</code> object <em>or</em>, with the <code>scalar = FALSE</code> argument, a logical vector identifying specific observations that contain that grammatical element.</p>
<p>For postal codes (“zip-codes” in the United States), the <code>has</code> function is <code>pm_has_postal()</code>. With the <code>sushi1_min</code> data, it will return <code>TRUE</code> because postal codes are present in the data:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">pm_has_postal</span>(sushi1_min)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">[<span class="dv">1</span>] <span class="ot">TRUE</span></a></code></pre></div>
<p>We can see which observations have postal codes using the <code>scalar = FALSE</code> argument. This is particularly useful for more complex data situations where postal codes are misformatted and deeper cleaning before parsing is necessary. In this case, every observation has a valid postal code and so <code>pm.hasZip</code> contains all <code>TRUE</code> values:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">pm_has_postal</span>(sushi1_min, <span class="dt">scalar =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="co"># A tibble: 24 x 3</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3">   pm.uid pm.address                                      pm.hasZip</a>
<a class="sourceLine" id="cb11-4" data-line-number="4">    <span class="op">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">                                           </span><span class="er">&lt;</span>lgl<span class="op">&gt;</span><span class="st">    </span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="st"> </span><span class="dv">1</span>      <span class="dv">1</span> <span class="dv">3407</span> Olive St St. Louis Missouri <span class="dv">63103</span>          <span class="ot">TRUE</span>     </a>
<a class="sourceLine" id="cb11-6" data-line-number="6"> <span class="dv">2</span>      <span class="dv">2</span> <span class="dv">6335</span> Delmar Blvd St. Louis MO <span class="dv">63112</span>             <span class="ot">TRUE</span>     </a>
<a class="sourceLine" id="cb11-7" data-line-number="7"> <span class="dv">3</span>      <span class="dv">3</span> <span class="dv">3221</span> S Grand Boulevard St. Louis MO <span class="dv">63118</span>       <span class="ot">TRUE</span>     </a>
<a class="sourceLine" id="cb11-8" data-line-number="8"> <span class="dv">4</span>      <span class="dv">4</span> <span class="dv">601</span> Clark Ave <span class="co">#104 St. Louis MO 63102-1719      TRUE     </span></a>
<a class="sourceLine" id="cb11-9" data-line-number="9"> <span class="dv">5</span>      <span class="dv">5</span> <span class="dv">601</span> Clark Ave Suite <span class="dv">104</span> St. Louis MO <span class="dv">63102-1719</span> <span class="ot">TRUE</span>     </a>
<a class="sourceLine" id="cb11-10" data-line-number="10"> <span class="dv">6</span>      <span class="dv">6</span> <span class="dv">1</span> Maryland Plaza St. Louis MO <span class="dv">63108</span>             <span class="ot">TRUE</span>     </a>
<a class="sourceLine" id="cb11-11" data-line-number="11"> <span class="dv">7</span>      <span class="dv">7</span> <span class="dv">9443</span> Olive Blvd St. Louis Missouri <span class="dv">63132</span>        <span class="ot">TRUE</span>     </a>
<a class="sourceLine" id="cb11-12" data-line-number="12"> <span class="dv">8</span>      <span class="dv">8</span> <span class="dv">4949</span> W Pine Blvd St. Louis MO <span class="dv">63108</span>             <span class="ot">TRUE</span>     </a>
<a class="sourceLine" id="cb11-13" data-line-number="13"> <span class="dv">9</span>      <span class="dv">9</span> <span class="dv">3674</span> Forest Park Ave St. Louis MO <span class="dv">63108</span>         <span class="ot">TRUE</span>     </a>
<a class="sourceLine" id="cb11-14" data-line-number="14"><span class="dv">10</span>     <span class="dv">10</span> <span class="dv">1013</span> Washington Avenue St. Louis MO <span class="dv">63101</span>       <span class="ot">TRUE</span>     </a>
<a class="sourceLine" id="cb11-15" data-line-number="15"><span class="co"># … with 14 more rows</span></a></code></pre></div>
<p>In a typical scenario, <code>pm_has_postal()</code> with the <code>scalar = FALSE</code> argument should be sufficent to prompt you to parse those postal codes. If <code>pm_parse_postal()</code> detects the presence of carrier routes (the four-digit additions to the typical five-digit zip-codes), it will parse those as well so that two postal code columns (<code>pm.zip</code> and <code>pm.zip4</code>) are returned:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>sushi1_min &lt;-<span class="st"> </span><span class="kw">pm_parse_postal</span>(sushi1_min)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span>sushi1_min</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="co"># A tibble: 24 x 4</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4">   pm.uid pm.address                           pm.zip pm.zip4</a>
<a class="sourceLine" id="cb12-5" data-line-number="5">    <span class="op">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">                                </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">  </span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="st"> </span><span class="dv">1</span>      <span class="dv">1</span> <span class="dv">3407</span> Olive St St. Louis Missouri     <span class="dv">63103</span>  <span class="ot">NA</span>     </a>
<a class="sourceLine" id="cb12-7" data-line-number="7"> <span class="dv">2</span>      <span class="dv">2</span> <span class="dv">6335</span> Delmar Blvd St. Louis MO        <span class="dv">63112</span>  <span class="ot">NA</span>     </a>
<a class="sourceLine" id="cb12-8" data-line-number="8"> <span class="dv">3</span>      <span class="dv">3</span> <span class="dv">3221</span> S Grand Boulevard St. Louis MO  <span class="dv">63118</span>  <span class="ot">NA</span>     </a>
<a class="sourceLine" id="cb12-9" data-line-number="9"> <span class="dv">4</span>      <span class="dv">4</span> <span class="dv">601</span> Clark Ave <span class="co">#104 St. Louis MO      63102  1719   </span></a>
<a class="sourceLine" id="cb12-10" data-line-number="10"> <span class="dv">5</span>      <span class="dv">5</span> <span class="dv">601</span> Clark Ave Suite <span class="dv">104</span> St. Louis MO <span class="dv">63102</span>  <span class="dv">1719</span>   </a>
<a class="sourceLine" id="cb12-11" data-line-number="11"> <span class="dv">6</span>      <span class="dv">6</span> <span class="dv">1</span> Maryland Plaza St. Louis MO        <span class="dv">63108</span>  <span class="ot">NA</span>     </a>
<a class="sourceLine" id="cb12-12" data-line-number="12"> <span class="dv">7</span>      <span class="dv">7</span> <span class="dv">9443</span> Olive Blvd St. Louis Missouri   <span class="dv">63132</span>  <span class="ot">NA</span>     </a>
<a class="sourceLine" id="cb12-13" data-line-number="13"> <span class="dv">8</span>      <span class="dv">8</span> <span class="dv">4949</span> W Pine Blvd St. Louis MO        <span class="dv">63108</span>  <span class="ot">NA</span>     </a>
<a class="sourceLine" id="cb12-14" data-line-number="14"> <span class="dv">9</span>      <span class="dv">9</span> <span class="dv">3674</span> Forest Park Ave St. Louis MO    <span class="dv">63108</span>  <span class="ot">NA</span>     </a>
<a class="sourceLine" id="cb12-15" data-line-number="15"><span class="dv">10</span>     <span class="dv">10</span> <span class="dv">1013</span> Washington Avenue St. Louis MO  <span class="dv">63101</span>  <span class="ot">NA</span>     </a>
<a class="sourceLine" id="cb12-16" data-line-number="16"><span class="co"># … with 14 more rows</span></a></code></pre></div>
<p>Had no carrier routes been present, these data would have been returned with only the <code>pm.zip</code> column. Note that <code>pm_parse_postal()</code> also updates the <code>pm.address</code> column and removes any postal codes that have been identified. This facilitates additional parsing in subsequent steps.</p>
</div>
<div id="states" class="section level3">
<h3 class="hasAnchor">
<a href="#states" class="anchor"></a>States</h3>
<p>To parse the cities out of <code>pm.address</code>, we’ll start by creating a state-level dictionary object that contains only references to Missouri since we don’t have data outside of that state:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>moDict &lt;-<span class="st"> </span><span class="kw">pm_dictionary</span>(<span class="dt">locale =</span> <span class="st">"us"</span>, <span class="dt">type =</span> <span class="st">"state"</span>, <span class="dt">filter =</span> <span class="st">"MO"</span>)</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span>moDict</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="co"># A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4">  state.output state.input</a>
<a class="sourceLine" id="cb13-5" data-line-number="5">  <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">        </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">      </span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="dv">1</span> MO           MO         </a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="dv">2</span> MO           Missouri   </a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="dv">3</span> MO           MISSOURI   </a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="dv">4</span> MO           missouri</a></code></pre></div>
<p>With our dictionary created in the object <code>moDict</code>, we can use that to test whether state names or abbreviations are found at the end of our address string with <code>pm_has_state()</code>:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="kw">pm_has_state</span>(sushi1_min, <span class="dt">dictionary =</span> moDict)</a>
<a class="sourceLine" id="cb14-2" data-line-number="2">[<span class="dv">1</span>] <span class="ot">TRUE</span></a></code></pre></div>
<p>We could also explore these matches further to make sure that misspellings did not prevent <code>pm_has_state()</code> from identifying states by using the <code>scalar = FALSE</code> argument. We’ll skip this step for now and attempt to parse the data using <code>pm_parse_state()</code>:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>sushi1_min &lt;-<span class="st"> </span><span class="kw">pm_parse_state</span>(sushi1_min, <span class="dt">dictionary =</span> moDict)</a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span>sushi1_min</a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="co"># A tibble: 24 x 5</span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4">   pm.uid pm.address                        pm.state pm.zip pm.zip4</a>
<a class="sourceLine" id="cb15-5" data-line-number="5">    <span class="op">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">                             </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">  </span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="st"> </span><span class="dv">1</span>      <span class="dv">1</span> <span class="dv">3407</span> Olive St St. Louis           MO       <span class="dv">63103</span>  <span class="ot">NA</span>     </a>
<a class="sourceLine" id="cb15-7" data-line-number="7"> <span class="dv">2</span>      <span class="dv">2</span> <span class="dv">6335</span> Delmar Blvd St. Louis        MO       <span class="dv">63112</span>  <span class="ot">NA</span>     </a>
<a class="sourceLine" id="cb15-8" data-line-number="8"> <span class="dv">3</span>      <span class="dv">3</span> <span class="dv">3221</span> S Grand Boulevard St. Louis  MO       <span class="dv">63118</span>  <span class="ot">NA</span>     </a>
<a class="sourceLine" id="cb15-9" data-line-number="9"> <span class="dv">4</span>      <span class="dv">4</span> <span class="dv">601</span> Clark Ave <span class="co">#104 St. Louis      MO       63102  1719   </span></a>
<a class="sourceLine" id="cb15-10" data-line-number="10"> <span class="dv">5</span>      <span class="dv">5</span> <span class="dv">601</span> Clark Ave Suite <span class="dv">104</span> St. Louis MO       <span class="dv">63102</span>  <span class="dv">1719</span>   </a>
<a class="sourceLine" id="cb15-11" data-line-number="11"> <span class="dv">6</span>      <span class="dv">6</span> <span class="dv">1</span> Maryland Plaza St. Louis        MO       <span class="dv">63108</span>  <span class="ot">NA</span>     </a>
<a class="sourceLine" id="cb15-12" data-line-number="12"> <span class="dv">7</span>      <span class="dv">7</span> <span class="dv">9443</span> Olive Blvd St. Louis         MO       <span class="dv">63132</span>  <span class="ot">NA</span>     </a>
<a class="sourceLine" id="cb15-13" data-line-number="13"> <span class="dv">8</span>      <span class="dv">8</span> <span class="dv">4949</span> W Pine Blvd St. Louis        MO       <span class="dv">63108</span>  <span class="ot">NA</span>     </a>
<a class="sourceLine" id="cb15-14" data-line-number="14"> <span class="dv">9</span>      <span class="dv">9</span> <span class="dv">3674</span> Forest Park Ave St. Louis    MO       <span class="dv">63108</span>  <span class="ot">NA</span>     </a>
<a class="sourceLine" id="cb15-15" data-line-number="15"><span class="dv">10</span>     <span class="dv">10</span> <span class="dv">1013</span> Washington Avenue St. Louis  MO       <span class="dv">63101</span>  <span class="ot">NA</span>     </a>
<a class="sourceLine" id="cb15-16" data-line-number="16"><span class="co"># … with 14 more rows</span></a></code></pre></div>
<p>If we inspect this object, we’ll see that <code>pm.state</code> contains the state abbreviation for Missouri in all cases. As with postal codes, the city names have been removed from <code>pm.address</code> to facilitate the next phase in parsing.</p>
</div>
<div id="cities" class="section level3">
<h3 class="hasAnchor">
<a href="#cities" class="anchor"></a>Cities</h3>
</div>
<div id="units" class="section level3">
<h3 class="hasAnchor">
<a href="#units" class="anchor"></a>Units</h3>
</div>
<div id="house-numbers" class="section level3">
<h3 class="hasAnchor">
<a href="#house-numbers" class="anchor"></a>House Numbers</h3>
</div>
<div id="street-prefix-and-suffix-data" class="section level3">
<h3 class="hasAnchor">
<a href="#street-prefix-and-suffix-data" class="anchor"></a>Street Prefix and Suffix Data</h3>
</div>
<div id="street-names" class="section level3">
<h3 class="hasAnchor">
<a href="#street-names" class="anchor"></a>Street Names</h3>
</div>
<div id="putting-it-all-back-together" class="section level3">
<h3 class="hasAnchor">
<a href="#putting-it-all-back-together" class="anchor"></a>Putting It All Back Together</h3>
</div>
</div>
<div id="getting-help" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-help" class="anchor"></a>Getting Help</h2>
<ul>
<li>If you are new to <code>R</code> itself, welcome! Hadley Wickham’s <a href="http://r4ds.had.co.nz"><em>R for Data Science</em></a> is an excellent way to get started with data manipulation in the tidyverse, which <code>stlcsb</code> is designed to integrate seamlessly with.</li>
<li>If you have questions about using <code>postmastr</code>, you are encouraged to use the <a href="https://community.rstudio.com">RStudio Community forums</a>. Please create a <a href="http://reprex.tidyverse.org/"><code>reprex</code></a> before posting. Feel free to tag Chris (<code>@chris.prener</code>) in any posts about <code>postmastr</code>.</li>
<li>If you think you’ve found a bug, please create a <a href="http://reprex.tidyverse.org/"><code>reprex</code></a> and then open an issue on <a href="https://github.com/slu-openGIS/stlcsb/issues/new/choose">GitHub</a>.</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#motivation">Motivation</a></li>
      <li><a href="#a-grammar-of-street-addresses">A Grammar of Street Addresses</a></li>
      <li><a href="#creating-dictionaries">Creating Dictionaries</a></li>
      <li><a href="#the-postmastr-workflow">The postmastr Workflow</a></li>
      <li><a href="#getting-help">Getting Help</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Christopher Prener.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
